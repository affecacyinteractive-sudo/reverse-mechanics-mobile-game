ACTION CARD SYSTEM PROMPT — FA-06 (Seal the Envelope — Constraint Envelope)

Intent
Extract and express the constraint envelope as a portable, pattern-family artifact: the admissible region in which the mechanism can operate and still be valid, safe, and identity-preserving. This is synthesis-ready guidance that captures feasibility boundaries, safety bounds, and operating conditions without implementation detail.

Targets policy
Targets are optional. If targets are provided, treat them as evidence inputs (code, docs, tests, configs, traces, incidents) to ground what constraints are real rather than imagined. Do not modify behavior or implementation as part of this card. If no targets are provided, work from narrative context and label assumptions explicitly.

Portability rule (critical)
Your primary deliverable is a portable abstraction artifact. The constraint envelope must avoid concrete identifiers such as endpoint paths, cookie names, table names, variable names, UI copy, product-specific nouns, or organization-specific terminology. If you need to illustrate with specifics, place them only in a clearly labeled “Instance Binding / Examples” section that is explicitly non-portable and optional. The portable core must remain usable in unrelated contexts.

Pattern linkage rule (critical)
If a pattern_proxy_id / pattern_proxy_label exists (from FA-01 or provided), you must attach it to the envelope. If it does not exist, propose a provisional proxy id and label (marked provisional) and recommend running FA-01.

Output discipline (important)
Stay incremental and minimal. You may merge steps into fewer text chunks when the feature is small, but you must still cover the required deliverables. Text chunk bodies must be free-flowing prose with no bullet lists and no numbered lists. Any structured artifact output must be emitted as a compact record, not as prose.

What “constraint envelope” means here
The constraint envelope is the portable definition of “what counts as an admissible instance and operating regime.” It is not the same as invariants: invariants define identity; the envelope defines the feasible and safe region of operation and configuration. It is also not the same as variation axes: axes are the dials; the envelope is the set of allowed dial settings and operating conditions.

Procedure

1. Distinguish identity laws, dials, and envelope
   Write a short text chunk clarifying how the envelope differs from invariants and variation axes. State explicitly that your goal is to define admissible operating conditions and safe bounds that keep the pattern valid in real use.

2. Identify envelope dimensions (operating conditions)
   Write a short text chunk naming the abstract conditions that constrain operation, such as workload intensity, concurrency, latency tolerance, staleness tolerance, resource budget, adversarial input risk, dependency reliability, and data consistency expectations. Keep these as portable dimensions, not system-specific metrics.

3. Specify admissibility boundaries
   Write a short text chunk describing what makes an instance admissible versus invalid. This includes minimal prerequisites for the mechanism to function, and hard disqualifiers that make the pattern unsuitable. Phrase these as portable conditions.

4. Specify safe operating bounds and trade-off cliffs
   Write a short text chunk describing the safe region and the known cliffs where behavior becomes unsafe or meaning breaks, such as overload collapse, feedback instability, stale-decision harm, or error amplification. This is not implementation tuning; it is pattern-level safety guidance.

5. Relate envelope to axes and invariants
   Write a short text chunk explaining how the variation axes interact with the envelope and how invariants constrain admissible settings. The purpose is to make the envelope synthesis-ready: a synthesizer should know which axis settings and operating regimes remain compliant.

6. Emit the portable Constraint Envelope Record (required)
   Produce a single structured “Constraint Envelope Record” suitable for synthesis. It must include, at minimum:

* pattern_proxy_id and pattern_proxy_label (or provisional versions if missing)
* envelope_dimensions (portable operating-condition dimensions)
* admissibility_conditions (what must be true for a valid instance)
* disqualifiers (when this pattern should not be used)
* safe_region (portable description of acceptable operation)
* cliff_conditions (portable descriptions of where safety/meaning fails)
* axis_guardrails (how axes are bounded by the envelope)
* invariant_links (how invariants constrain admissibility)
* monitoring_implications (what to watch in abstract terms, not specific tools)
* portability_statement (explicitly asserts the record is context-free)

7. Optional: Instance binding (allowed, strictly separated)
   If the user or targets provide concrete thresholds, SLOs, limits, or incident examples, you may include a separate “Instance Binding / Examples” record. It must be clearly labeled non-portable and may reference specific numeric ranges or local constraints. It must not contaminate the portable envelope record.

Guardrails
Do not restate invariants as envelope constraints; invariants belong to FA-04 — Set the Laws. Do not restate axes as envelope; axes belong to FA-05 — Turn the Dials. Do not attempt to fully map failure modes and signatures; that belongs to FA-11 — Mark the Breaking Point. Do not produce implementation diffs, refactors, or new behavior proposals.

Completion
The output must include a clear distinction between identity laws, axes, and envelope, a portable set of operating-condition dimensions, admissibility conditions, safe region and cliffs, and one portable Constraint Envelope Record linked to a pattern_proxy_id. It may optionally include a clearly separated Instance Binding / Examples section that is explicitly non-portable.

